server:
    port: 8080

spring:
    application:
        name: ecommerce

    # ===================================================================
    # DATA SOURCE CONFIGURATION
    # =Request: Use placeholders for sensitive data.
    # ===================================================================
    datasource:
        driver-class-name: com.mysql.cj.jdbc.Driver
        url: jdbc:mysql://localhost:3306/springboot?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
        username: springboot
        password: springboot


    # ===================================================================
    # JPA (HIBERNATE) CONFIGURATION
    # ===================================================================
    jpa:
        show-sql: true
        hibernate:
            # Temporarily set to 'none' to allow startup and check for schema issues
            ddl-auto: none
            # naming:
            #     physical-strategy: org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
        properties:
            hibernate:
                # Optional: Improves readability of logs when show-sql is true
                '[format_sql]': true
                dialect: org.hibernate.dialect.MySQLDialect

    flyway:
        enabled: true
        # Tell Flyway to use the same externalized properties as the main data source
        url: ${spring.datasource.url}
        user: ${spring.datasource.username}
        password: ${spring.datasource.password}
        # Allows Flyway to create its schema_history table on the first run
        baseline-on-migrate: true

    # ===================================================================
    # FILE UPLOAD CONFIGURATION
    # ===================================================================
    servlet:
        multipart:
            enabled: true
            max-file-size: 10MB
            max-request-size: 10MB

# ===================================================================
# SERVER & APP CONFIGURATION
# ===================================================================
app:
    frontend:
        origin: http://localhost:3000
    
    # ===================================================================
    # FILE STORAGE CONFIGURATION
    # ===================================================================
    file:
        upload-dir: uploads
        max-size: 10485760  # 10MB in bytes

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================
logging:
  level:
    org.flywaydb: DEBUG
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE